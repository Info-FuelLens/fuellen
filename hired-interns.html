<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hired Interns - FuelLens</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .admin-login {
            max-width: 400px;
            margin: 50px auto;
            padding: 30px;
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        .admin-login h2 {
            text-align: center;
            margin-bottom: 30px;
            color: #333;
        }
        .admin-login input {
            width: 100%;
            padding: 12px;
            margin-bottom: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }
        .admin-login button {
            width: 100%;
            padding: 12px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        .admin-login button:hover {
            background: #0056b3;
        }
        .intern-content {
            display: none;
        }
        .error-message {
            color: red;
            text-align: center;
            margin-bottom: 20px;
            display: none;
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <a href="index.html" class="logo">
                <i class="fas fa-gas-pump"></i>
                <span>FuelLens</span>
            </a>
            <div class="nav-links">
                <a href="index.html" class="nav-link">Home</a>
                <div class="features-dropdown">
                    <a href="#" class="nav-link">Features </i></a>
                    <div class="dropdown-menu">
                        <a href="features.html" class="dropdown-item"><i class="fas fa-check-circle"></i> Basic Features</a>
                        <a href="advanced-features.html" class="dropdown-item"><i class="fas fa-star"></i> Advanced Features</a>
                    </div>
                </div>
                <a href="about.html" class="nav-link">About</a>
                <a href="contact.html" class="nav-link">Contact</a>
                <a href="intern-hiring.html" class="nav-link">Internships</a>
                <a href="erp-portal.html" class="nav-link">ERP Portal</a>
                <a href="login.html" class="btn btn-outline">Login</a>
                <a href="register.html" class="btn btn-primary">Register</a>
            </div>
            <button class="mobile-menu-btn">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </nav>

    <main>
        <section class="admin-login-section">
            <div class="container">
                <div class="admin-login">
                    <h2><i class="fas fa-lock"></i> Admin Login</h2>
                    <div class="error-message" id="errorMessage">
                        Invalid credentials. Please try again.
                    </div>
                    <form id="adminLoginForm">
                        <input type="text" id="username" placeholder="Username" required>
                        <input type="password" id="password" placeholder="Password" required>
                        <button type="submit">Login</button>
                    </form>
                </div>
            </div>
        </section>

        <section class="intern-content" id="internContent">
            <section class="hero">
                <div class="container">
                    <div class="hero-content">
                        <h1>ðŸŒŸ Our Hired Interns</h1>
                        <p>Meet the talented individuals who have contributed to FuelLens's success</p>
                    </div>
                </div>
            </section>

            <section class="hired-interns">
                <div class="container">
                    <div class="interns-table">
                        <div class="table-controls">
                            <button id="showApplications" class="btn btn-primary">View Applications</button>
                            <button id="showHired" class="btn btn-outline">View Hired Interns</button>
                        </div>
                        
                        <div id="applicationsTable" style="display: none;">
                            <h3>Internship Applications</h3>
                            <table>
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Email</th>
                                        <th>Position</th>
                                        <th>College</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="applicationsList">
                                    <!-- Applications will be loaded here -->
                                </tbody>
                            </table>
                        </div>

                        <div id="hiredInternsTable">
                            <h3>Hired Interns</h3>
                            <table>
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Role</th>
                                        <th>Duration</th>
                                        <th>College</th>
                                        <th>Skills</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody id="hiredInternsList">
                                    <!-- Hired interns will be loaded here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <section class="intern-success-stories">
                <div class="container">
                    <h2>Success Stories</h2>
                    <div class="success-stories-grid">
                        <div class="success-story-card">
                            <div class="story-content">
                                <p>"My internship at FuelLens was transformative. I worked on real projects that are now being used by fuel stations across India."</p>
                                <div class="story-author">
                                    <h4>Amit R.</h4>
                                    <p>Web Development Intern</p>
                                </div>
                            </div>
                        </div>
                        <div class="success-story-card">
                            <div class="story-content">
                                <p>"The hands-on experience and mentorship I received helped me land a full-time role at a leading tech company."</p>
                                <div class="story-author">
                                    <h4>Priya S.</h4>
                                    <p>UI/UX Design Intern</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </section>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h4>About FuelLens</h4>
                    <p>Revolutionizing CNG tank verification through innovative technology and comprehensive compliance solutions.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-linkedin-in"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
                <div class="footer-column">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="index.html"><i class="fas fa-home"></i> Home</a></li>
                        <li><a href="features.html"><i class="fas fa-star"></i> Features</a></li>
                        <li><a href="about.html"><i class="fas fa-info-circle"></i> About</a></li>
                        <li><a href="contact.html"><i class="fas fa-envelope"></i> Contact</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h4>Services</h4>
                    <ul>
                        <li><a href="tank-verification.html"><i class="fas fa-truck"></i> Tank Verification</a></li>
                        <li><a href="station-management.html"><i class="fas fa-gas-pump"></i> Station Management</a></li>
                        <li><a href="analytics.html"><i class="fas fa-chart-bar"></i> Analytics</a></li>
                        <li><a href="compliance.html"><i class="fas fa-shield-alt"></i> Compliance</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h4>Contact Info</h4>
                    <ul>
                        <li><i class="fas fa-map-marker-alt"></i> 46, Chadramuli Park, Aakhlol, Bhavnagar</li>
                        <li><i class="fas fa-phone"></i> +91 9157027713</li>
                        <li><i class="fas fa-envelope"></i> info.fuellens@gmail.com</li>
                        <li><i class="fas fa-clock"></i> Mon-Fri: 9AM-5PM</li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 FuelLens. All rights reserved.</p>
                <div class="footer-links">
                    <a href="privacy-policy.html">Privacy Policy</a>
                    <a href="terms-of-service.html">Terms of Service</a>
                    <a href="cookie-policy.html">Cookie Policy</a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Google Sheets configuration
        const SPREADSHEET_ID = '1nwWjSerdpl7BGesL7ykjKXBYhnWcZdB0nNIbcNsOP94'; // Replace with your spreadsheet ID
        const API_KEY = 'AIzaSyCn8OWo7H31LHveOlEXMy4dWHcNutj9AlY'; // Replace with your API key
        const SHEET_NAME = 'interndata'; // Your sheet name

        async function loadApplications() {
            try {
                const response = await fetch(
                    `https://sheets.googleapis.com/v4/spreadsheets/${SPREADSHEET_ID}/values/${SHEET_NAME}!A:L?key=${API_KEY}`
                );
                
                if (!response.ok) {
                    throw new Error('Failed to fetch applications');
                }

                const data = await response.json();
                const applications = data.values.slice(1).map(row => ({
                    name: row[0],
                    email: row[1],
                    phone: row[2],
                    city: row[3],
                    college: row[4],
                    course: row[5],
                    position: row[6],
                    skills: row[7],
                    experience: row[8],
                    why_join: row[9],
                    timestamp: row[10],
                    status: row[11]
                }));

                const applicationsList = document.getElementById('applicationsList');
                applicationsList.innerHTML = '';

                applications.forEach((application, index) => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${application.name}</td>
                        <td>${application.email}</td>
                        <td>${application.position}</td>
                        <td>${application.college}</td>
                        <td>${application.status}</td>
                        <td>
                            <button onclick="updateStatus(${index}, 'Hired')" class="btn btn-success">Hire</button>
                            <button onclick="updateStatus(${index}, 'Rejected')" class="btn btn-danger">Reject</button>
                        </td>
                    `;
                    applicationsList.appendChild(row);
                });
            } catch (error) {
                console.error('Error loading applications:', error);
                alert('Failed to load applications. Please try again.');
            }
        }

        async function loadHiredInterns() {
            try {
                const response = await fetch(
                    `https://sheets.googleapis.com/v4/spreadsheets/${SPREADSHEET_ID}/values/${SHEET_NAME}!A:L?key=${API_KEY}`
                );
                
                if (!response.ok) {
                    throw new Error('Failed to fetch applications');
                }

                const data = await response.json();
                const applications = data.values.slice(1).map(row => ({
                    name: row[0],
                    email: row[1],
                    phone: row[2],
                    city: row[3],
                    college: row[4],
                    course: row[5],
                    position: row[6],
                    skills: row[7],
                    experience: row[8],
                    why_join: row[9],
                    timestamp: row[10],
                    status: row[11]
                }));

                const hiredInternsList = document.getElementById('hiredInternsList');
                hiredInternsList.innerHTML = '';

                const hiredInterns = applications.filter(app => app.status === 'Hired');
                hiredInterns.forEach(intern => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${intern.name}</td>
                        <td>${intern.position}</td>
                        <td>3 Months</td>
                        <td>${intern.college}</td>
                        <td>${intern.skills}</td>
                        <td>Active</td>
                    `;
                    hiredInternsList.appendChild(row);
                });
            } catch (error) {
                console.error('Error loading hired interns:', error);
                alert('Failed to load hired interns. Please try again.');
            }
        }

        async function updateStatus(index, newStatus) {
            try {
                // First, get the current data
                const response = await fetch(
                    `https://sheets.googleapis.com/v4/spreadsheets/${SPREADSHEET_ID}/values/${SHEET_NAME}!A:L?key=${API_KEY}`
                );
                
                if (!response.ok) {
                    throw new Error('Failed to fetch applications');
                }

                const data = await response.json();
                const values = data.values;
                
                // Update the status in the row
                values[index + 1][11] = newStatus; // Status is in column L (12th column)

                // Update the sheet
                await fetch(
                    `https://sheets.googleapis.com/v4/spreadsheets/${SPREADSHEET_ID}/values/${SHEET_NAME}!A:L?valueInputOption=RAW&key=${API_KEY}`,
                    {
                        method: 'PUT',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            values: values,
                            majorDimension: 'ROWS'
                        })
                    }
                );

                // Reload the data
                loadApplications();
                loadHiredInterns();
            } catch (error) {
                console.error('Error updating status:', error);
                alert('Failed to update status. Please try again.');
            }
        }

        document.getElementById('adminLoginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            if (username === 'admin' && password === 'admin123') {
                document.querySelector('.admin-login-section').style.display = 'none';
                document.getElementById('internContent').style.display = 'block';
                loadApplications();
                loadHiredInterns();
            } else {
                document.getElementById('errorMessage').style.display = 'block';
            }
        });

        document.getElementById('showApplications').addEventListener('click', function() {
            document.getElementById('applicationsTable').style.display = 'block';
            document.getElementById('hiredInternsTable').style.display = 'none';
        });

        document.getElementById('showHired').addEventListener('click', function() {
            document.getElementById('applicationsTable').style.display = 'none';
            document.getElementById('hiredInternsTable').style.display = 'block';
        });

        const style = document.createElement('style');
        style.textContent = `
            .table-controls {
                margin-bottom: 20px;
                display: flex;
                gap: 10px;
            }
            .btn.active {
                background: #0056b3;
                color: white;
            }
            .status {
                padding: 5px 10px;
                border-radius: 15px;
                font-size: 0.8em;
            }
            .status.pending {
                background: #ffc107;
                color: #000;
            }
            .status.hired {
                background: #28a745;
                color: white;
            }
            .status.rejected {
                background: #dc3545;
                color: white;
            }
            .status.ongoing {
                background: #17a2b8;
                color: white;
            }
            .btn-sm {
                padding: 5px 10px;
                font-size: 0.8em;
                margin: 0 2px;
            }
        `;
        document.head.appendChild(style);
    </script>
    <script src="main.js"></script>
</body>
</html>
